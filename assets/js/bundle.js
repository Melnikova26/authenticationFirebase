!function(){"use strict";const e="https://database-52211-default-rtdb.firebaseio.com/albums.json";var t=async()=>{const t=[];try{const i=await fetch(e);(await i.json()).forEach((e=>{let{img:i,title:s,artist:n,songs:a}=e;t.push({img:i,title:s,artist:n,songs:a})}))}catch(t){console.log(`Could not fetch ${e}, status: ${t.status}`)}return t},i=function(){class e{constructor(e,t,i,s){this.src=e,this.title=t,this.artist=i,this.parent=document.querySelector(s)}render(){const e=document.createElement("div");e.classList.add("main__item"),e.setAttribute("data-album",`${this.title}`),e.innerHTML=`\n                <div class="main__picture">\n                    <img src=${this.src} alt=${this.title}>\n                </div>\n                <div class="main__subheader">${this.title}</div>\n                <div class="main__text">${this.artist}</div>\n            `,this.parent.append(e)}}t().then((t=>{t.forEach((t=>{let{img:i,title:s,artist:n}=t;new e(i,s,n,".main__items").render()}))})).then((()=>{const e=document.querySelectorAll(".main__item");e[1].click(),function(e,t,i,s){const n=document.querySelector(".header__search"),a=/^\s+|\s+(?=\s)|\s+$/g;n.addEventListener("keydown",(c=>{if(13===c.keyCode){const c=n.value.replace(a,"").toUpperCase();if(""!=c){s.forEach((e=>{-1===e.querySelector(i).innerText.toUpperCase().search(c)?e.classList.add(t):e.classList.remove(t)}));const n=document.querySelectorAll(`${e}:not(.${t})`);n[0].click(),console.log(n[0])}else s.forEach((e=>{e.classList.remove(t)})),document.querySelectorAll(e)[1].click()}}))}(".main__item","hide",".main__subheader",e)}))};window.addEventListener("DOMContentLoaded",(async()=>{const e=await t();console.log(e),i();const s=document.querySelector(".wrapper__img"),n=document.querySelector(".container"),a=document.querySelector(".main__items"),c=document.querySelector(".aside__list"),r=document.querySelector(".aside"),l=document.querySelector(".bar"),d=document.querySelector(".range"),o=document.querySelector(".start"),u=document.querySelector(".end"),m=document.querySelector(".main__audio");let v=0,y=!1,_="";function h(e,t){let i=Math.floor(e/60),s=Math.floor(e%60);return i<10&&(i=`0${i}`),s<10&&(s=`0${s}`),t.innerHTML=`${i}:${s}`}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".wave1";document.querySelectorAll(t).forEach((t=>{t.style.animationPlayState=e}))}a.addEventListener("click",(function(t){a.querySelectorAll(".main__picture").forEach((e=>{e.classList.remove("active")}));const i=t.target,n=i.closest(".main__item");if(m.pause(),u.innerHTML="",document.querySelector(".start").innerHTML="00:00",l.style.width="0%",i&&n.hasAttribute("data-album")){const t=n.getAttribute("data-album");document.querySelector(".aside__header").remove(),c.innerHTML="",e.forEach((e=>{let{img:i,title:a,artist:l,songs:d}=e;if(a===t){n.querySelector(".main__picture").classList.add("active"),s.style.backgroundImage=`url(${i})`,function(e,t,i,s){const n=document.createElement("div");n.classList.add("aside__header"),n.innerHTML=`\n        <div class="aside__picture">\n            <img src=${e} alt=${t}>\n        </div>\n        <div class="aside__desc">\n            <div class="aside__title">${t}</div>\n            <div class="aside__text">${i}</div>\n            <div class="aside__ost">OST</div>\n        </div>\n    `,s.prepend(n)}(i,a,l,r),function(e,t){e.forEach((e=>{const i=document.createElement("li");i.classList.add("aside__item"),i.innerHTML=`\n                <div class="wave">\n                    <div class="wave1"></div>\n                    <div class="wave1"></div>\n                    <div class="wave1"></div>\n                    <div class="wave1"></div>\n                </div>\n                <div class="aside__num grey">${e.id}</div>\n                <div class="aside__song">${e.title}</div>\n                <div class="aside__singer grey">${e.singer}</div>\n                <div class="aside__total grey">${e.duration}</div>`,t.appendChild(i)}))}(d,c);const e=document.querySelectorAll(".aside__num"),t=document.querySelectorAll(".wave");!function(e,t,i){e.forEach(((s,n)=>{s.addEventListener("click",(()=>{e.forEach((e=>{e.style.visibility="visible"})),t.forEach((e=>{e.style.visibility="hidden"})),m.src=i[n].src,console.log(m.src,i[n].src,document.querySelectorAll(".wave")[n]),s.style.visibility="hidden",document.querySelectorAll(".wave")[n].style.visibility="visible",y&&m.src===_&&(m.currentTime=v,y=!1),m.play(),f("running"),console.log(v),console.log(y)}))}))}(e,t,d),function(e){e.forEach(((e,t)=>{e.addEventListener("click",(()=>{_=m.src,e.style.visibility="hidden",document.querySelectorAll(".aside__num")[t].style.visibility="visible",m.currentTime=v,m.pause();let i=Math.floor(v/60),s=Math.floor(v%60);s<10&&(s=`0${s}`),i<10&&(i=`0${i}`),o.innerHTML=`${i}:${s}`,y=!0,console.log(y)}))}))}(t)}}))}})),m.addEventListener("timeupdate",(e=>{const t=e.target.currentTime,i=e.target.duration;v=t;let s=t/i*100;l.style.width=`${s}%`,m.addEventListener("loadeddata",(()=>{h(m.duration,u)})),h(t,o)})),d.addEventListener("click",(e=>{let t=d.clientWidth,i=e.offsetX,s=m.duration;m.currentTime=i/t*s,m.paused||m.play()})),m.addEventListener("ended",(()=>{f("paused")})),m.addEventListener("pause",(()=>{document.querySelector(".start").innerHTML="00:00",l.style.width="0%"}));const p=document.querySelector(".burger"),g=document.querySelector(".close");p.addEventListener("click",(()=>{p.style.display="none",n.style.display="block",g.style.display="block"})),g.addEventListener("click",(()=>{p.style.display="block",n.style.display="none",g.style.display="none"}))}))}();
//# sourceMappingURL=bundle.js.map