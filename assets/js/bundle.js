window.addEventListener("DOMContentLoaded",(function(){const t=document.querySelector(".wrapper__img"),e=document.querySelector(".main__items"),i=document.querySelector(".aside__list"),n=document.querySelector(".aside"),s=document.querySelector(".end"),a=document.querySelector(".bar"),r=document.querySelector(".range"),d=document.querySelector(".start"),l=document.querySelector(".end"),c=document.querySelector(".main__audio");let o,u=0,v=!1;async function m(){return await fetch("https://database-52211-default-rtdb.firebaseio.com/albums.json").then((t=>t.json())).then((t=>t)).catch((t=>console.error(t)))}function _(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".wave1";document.querySelectorAll(e).forEach((e=>{e.style.animationPlayState=t}))}e.addEventListener("click",(function(e){const r=e.target,l=r.closest(".main__item");if(c.pause(),s.innerHTML="",document.querySelector(".start").innerHTML="00:00",a.style.width="0%",r&&l.hasAttribute("data-album")){const e=l.getAttribute("data-album");m().then((s=>{s.forEach((s=>{let{img:a,title:r,artist:l,songs:m}=s;if(r===e){t.style.backgroundImage=`url(${a})`;const e=document.createElement("div");e.classList.add("aside__header"),e.innerHTML=`\n\t\t\t\t\t\t\t<div class="aside__picture">\n\t\t\t\t\t\t\t\t<img src=${a} alt=${r}>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="aside__desc">\n\t\t\t\t\t\t\t\t<div class="aside__title">${r}</div>\n\t\t\t\t\t\t\t\t<div class="aside__text">${l}</div>\n\t\t\t\t\t\t\t\t<div class="aside__ost">OST</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`,document.querySelector(".aside__header").remove(),n.prepend(e),i.innerHTML="",m.forEach((t=>{const e=document.createElement("li");e.classList.add("aside__item"),e.innerHTML=`\n\t\t\t\t\t\t\t\t\t<div class="wave">\n\t\t\t\t\t\t\t\t\t\t<div class="wave1"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="wave1"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="wave1"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="wave1"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="aside__num grey">${t.id}</div>\n\t\t\t\t\t\t\t\t\t<div class="aside__song">${t.title}</div>\n\t\t\t\t\t\t\t\t\t<div class="aside__singer grey">${t.singer}</div>\n\t\t\t\t\t\t\t\t\t<div class="aside__total grey">${t.duration}</div>`,i.appendChild(e)}));const s=document.querySelectorAll(".aside__num"),h=document.querySelectorAll(".wave");s.forEach(((t,e)=>{t.addEventListener("click",(()=>{s.forEach((t=>{t.style.visibility="visible"})),h.forEach((t=>{t.style.visibility="hidden"})),c.src=m[e].src,console.log(c.src,m[e].src,document.querySelectorAll(".wave")[e]),t.style.visibility="hidden",document.querySelectorAll(".wave")[e].style.visibility="visible",v&&c.src===o&&(c.currentTime=u,v=!1),c.play(),_("running"),console.log(u),console.log(v)}))})),h.forEach(((t,e)=>{t.addEventListener("click",(()=>{o=c.src,t.style.visibility="hidden",document.querySelectorAll(".aside__num")[e].style.visibility="visible",c.currentTime=u,c.pause();let i=Math.floor(u/60),n=Math.floor(u%60);n<10&&(n=`0${n}`),i<10&&(i=`0${i}`),d.innerHTML=`${i}:${n}`,v=!0,console.log(v)}))}))}}))}))}})),c.addEventListener("timeupdate",(t=>{const e=t.target.currentTime;u=e;let i=e/t.target.duration*100;a.style.width=`${i}%`,c.addEventListener("loadeddata",(()=>{let t=c.duration,e=Math.floor(t/60),i=Math.floor(t%60);e<10&&(e=`0${e}`),i<10&&(i=`0${i}`),l.innerHTML=`${e}:${i}`}));let n=Math.floor(e/60),s=Math.floor(e%60);s<10&&(s=`0${s}`),n<10&&(n=`0${n}`),d.innerHTML=`${n}:${s}`})),r.addEventListener("click",(t=>{let e=r.clientWidth,i=t.offsetX,n=c.duration;c.currentTime=i/e*n,c.play()})),c.addEventListener("ended",(()=>{_("paused")})),c.addEventListener("pause",(()=>{document.querySelector(".start").innerHTML="00:00",a.style.width="0%",console.log("pauzze"),console.log(c.paused,"пауза?")})),function(){class t{constructor(t,e,i,n){this.src=t,this.title=e,this.artist=i,this.parent=document.querySelector(n)}render(){const t=document.createElement("div");t.classList.add("main__item"),t.setAttribute("data-album",`${this.title}`),t.innerHTML=`\n\t\t\t\t\t<div class="main__picture">\n                        <img src=${this.src} alt=${this.title}>\n                    </div>\n                    <div class="main__subheader">${this.title}</div>\n                    <div class="main__text">${this.artist}</div>\n\t\t\t\t`,this.parent.append(t)}}m().then((e=>{e.forEach((e=>{let{img:i,title:n,artist:s}=e;new t(i,n,s,".main__items").render()}))}))}(),document.querySelector(".header__results"),m().then((t=>{t.forEach((t=>{let{img:e,title:i,artist:n}=t}))}))}));
//# sourceMappingURL=bundle.js.map