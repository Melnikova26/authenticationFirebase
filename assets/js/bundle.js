!function(){"use strict";const e="https://database-52211-default-rtdb.firebaseio.com/albums.json";var t=async()=>{const t=[];try{const i=await fetch(e);(await i.json()).forEach((e=>{let{img:i,title:s,artist:n,songs:a}=e;t.push({img:i,title:s,artist:n,songs:a})}))}catch(t){console.log(`Could not fetch ${e}, status: ${t.status}`)}return t},i=function(){class e{constructor(e,t,i,s){this.src=e,this.title=t,this.artist=i,this.parent=document.querySelector(s)}render(){const e=document.createElement("div");e.classList.add("main__item"),e.setAttribute("data-album",`${this.title}`),e.innerHTML=`\n                <div class="main__picture">\n                    <img src=${this.src} alt=${this.title}>\n                </div>\n                <div class="main__subheader">${this.title}</div>\n                <div class="main__text">${this.artist}</div>\n            `,this.parent.append(e)}}t().then((t=>{t.forEach((t=>{let{img:i,title:s,artist:n}=t;new e(i,s,n,".main__items").render()}))})).then((()=>{const e=document.querySelectorAll(".main__item");e[1].click(),function(e,t,i,s){const n=document.querySelector(".header__search"),a=/^\s+|\s+(?=\s)|\s+$/g;n.addEventListener("keydown",(l=>{if(13===l.keyCode){const l=n.value.replace(a,"").toUpperCase();""!=l?(s.forEach((e=>{-1===e.querySelector(i).innerText.toUpperCase().search(l)?e.classList.add(t):e.classList.remove(t)})),document.querySelectorAll(`${e}:not(.${t})`)[0].click()):(s.forEach((e=>{e.classList.remove(t)})),document.querySelectorAll(e)[1].click())}}))}(".main__item","hide",".main__subheader",e)}))};window.addEventListener("DOMContentLoaded",(async()=>{const e=await t();i();const s=document.querySelector(".wrapper__img"),n=document.querySelector(".container"),a=document.querySelector(".main__items"),l=document.querySelector(".aside__list"),c=document.querySelector(".aside"),r=document.querySelector(".bar"),d=document.querySelector(".range"),o=document.querySelector(".start"),u=document.querySelector(".end"),y=document.querySelector(".main__audio");let v=0,m=!1,_="",h=0;function p(e){return`<div class="aside__num grey">${e}</div>`}function S(e,t){let i=Math.floor(e/60),s=Math.floor(e%60);return i<10&&(i=`0${i}`),s<10&&(s=`0${s}`),t.innerHTML=`${i}:${s}`}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".wave1";document.querySelectorAll(t).forEach((t=>{t.style.animationPlayState=e}))}a.addEventListener("click",(function(t){a.querySelectorAll(".main__picture").forEach((e=>{e.classList.remove("active")}));const i=t.target,n=i.closest(".main__item");if(y.pause(),u.innerHTML="",document.querySelector(".start").innerHTML="00:00",r.style.width="0%",i&&n.hasAttribute("data-album")){const t=n.getAttribute("data-album");document.querySelector(".aside__header").remove(),l.innerHTML="",e.forEach((e=>{let{img:i,title:a,artist:r,songs:d}=e;if(a===t){n.querySelector(".main__picture").classList.add("active"),s.style.backgroundImage=`url(${i})`,function(e,t,i,s){const n=document.createElement("div");n.classList.add("aside__header"),n.innerHTML=`\n        <div class="aside__picture">\n            <img src=${e} alt=${t}>\n        </div>\n        <div class="aside__desc">\n            <div class="aside__title">${t}</div>\n            <div class="aside__text">${i}</div>\n            <div class="aside__ost">OST</div>\n        </div>\n    `,s.prepend(n)}(i,a,r,c),function(e,t){e.forEach((e=>{const i=document.createElement("li");i.classList.add("aside__item"),i.innerHTML=`\n                <div class="aside__play-pause">\n                    <img class="play" src='./assets/icons/play.svg' alt="icon">\n                    <img class="pause" src='./assets/icons/pause.svg' alt="icon">\n                </div>\n                <div class="aside__num grey">${e.id}</div>\n                <div class="aside__song">${e.title}</div>\n                <div class="aside__singer grey">${e.singer}</div>\n                <div class="aside__total grey">${e.duration}</div>`,t.appendChild(i)}))}(d,l),document.querySelectorAll(".aside__item").forEach(((e,t)=>{e.addEventListener("mouseover",(t=>{const i=t.target.closest(".aside__item");if(e==i||e==i){const e=i.querySelector(".aside__play-pause"),t=i.querySelector(".play"),s=i.querySelector(".pause"),n=document.querySelectorAll(".pause"),a=i.querySelector(".aside__num");e.style.visibility="visible",a.style.visibility="hidden",y.paused?t.style.visibility="visible":s===n[h]?n[h].style.visibility="visible":(s.style.visibility="hidden",t.style.visibility="visible")}})),e.addEventListener("mouseout",(i=>{if(e==i.target.closest(".aside__item")||e==i.target){const e=i.target.closest(".aside__item"),s=document.querySelectorAll(".aside__play-pause")[t],n=document.querySelectorAll(".play")[t],a=document.querySelectorAll(".pause"),l=e.querySelector(".aside__num");s.style.visibility="hidden",n.style.visibility="hidden",a.forEach((e=>{e.style.visibility="hidden"})),l.style.visibility="visible"}}))}));const e=document.querySelectorAll(".aside__num");!function(e,t){const i=document.querySelectorAll(".play"),s=document.querySelectorAll(".pause");i.forEach(((i,n)=>{i.addEventListener("click",(a=>{s.forEach((e=>{e.style.visibility="hidden"})),e.forEach(((e,t)=>{e.innerHTML=p(t+1)})),y.src=t[n].src,i.style.visibility="hidden",s[n].style.visibility="visible",h=n,e[n].innerHTML='\n\t\t\t<div class="wave">\n\t\t\t\t<div class="wave1"></div>\n\t\t\t\t<div class="wave1"></div>\n\t\t\t\t<div class="wave1"></div>\n\t\t\t\t<div class="wave1"></div>\n\t\t\t</div>\n\t\t',m&&y.src===_&&(y.currentTime=v,m=!1),y.play(),b("running")}))}))}(e,d),function(e,t){const i=document.querySelectorAll(".pause"),s=document.querySelectorAll(".play");i.forEach(((i,n)=>{i.addEventListener("click",(()=>{_=y.src,i.style.visibility="hidden",s[n].style.visibility="visible",y.currentTime=v,t[n].innerHTML=p(e[n].id),y.pause(),S(v,o),m=!0}))}))}(d,e)}}))}})),y.addEventListener("timeupdate",(e=>{const t=e.target.currentTime,i=e.target.duration;v=t;let s=t/i*100;r.style.width=`${s}%`,y.addEventListener("loadeddata",(()=>{S(y.duration,u)})),S(t,o)})),d.addEventListener("click",(e=>{let t=d.clientWidth,i=e.offsetX,s=y.duration;y.currentTime=i/t*s,y.paused||y.play()})),y.addEventListener("ended",(()=>{b("paused")})),y.addEventListener("pause",(()=>{document.querySelector(".start").innerHTML="00:00",r.style.width="0%"}));const q=document.querySelector(".burger"),f=document.querySelector(".close");q.addEventListener("click",(()=>{q.style.display="none",n.style.display="block",f.style.display="block"})),f.addEventListener("click",(()=>{q.style.display="block",n.style.display="none",f.style.display="none"}))}))}();
//# sourceMappingURL=bundle.js.map